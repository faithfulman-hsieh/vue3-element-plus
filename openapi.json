{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"User API","description":"API for managing users"},{"name":"Task API","description":"API for managing tasks"},{"name":"Role API","description":"API for managing user roles"},{"name":"Todo API","description":"API for managing todo tasks"},{"name":"Process API","description":"API for managing processes"},{"name":"Authentication API","description":"API for user authentication and JWT token generation"}],"paths":{"/api/role/users/{username}":{"put":{"tags":["Role API"],"summary":"Update user roles","description":"Updates roles for a user","operationId":"updateUserRoles","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleRequest"}}},"required":true},"responses":{"500":{"description":"Internal server error"},"400":{"description":"Invalid role data"},"200":{"description":"Updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRole"}}}},"404":{"description":"User not found"}}}},"/api/todos/{id}/complete":{"post":{"tags":["Todo API"],"summary":"Complete a todo","description":"Marks a todo task as completed with the specified action and priority","operationId":"completeTodo","parameters":[{"name":"id","in":"path","description":"ID of the todo task","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"action","in":"query","description":"Action to complete the todo","required":true,"schema":{"type":"string"}},{"name":"priority","in":"query","description":"Priority of the todo","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"Internal server error"},"404":{"description":"Todo not found"},"200":{"description":"Todo completed successfully"},"400":{"description":"Invalid action or priority"}}}},"/api/todos/addTodo":{"post":{"tags":["Todo API"],"summary":"Create a new todo","description":"Creates a new todo task with the provided details","operationId":"createTodo","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TodoRequest"}}},"required":true},"responses":{"500":{"description":"Internal server error"},"400":{"description":"Invalid todo data"},"200":{"description":"Todo created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Todo"}}}}}}},"/api/task/{instanceId}/jump":{"post":{"tags":["Task API"],"summary":"Jump to task","description":"Jumps the process to a specific task","operationId":"jumpToTask","parameters":[{"name":"instanceId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskJumpRequest"}}},"required":true},"responses":{"500":{"description":"Internal server error"},"404":{"description":"Instance or task not found"},"400":{"description":"Invalid target task"},"200":{"description":"Jumped successfully"}}}},"/api/task/{id}/submit":{"post":{"tags":["Task API"],"summary":"Submit task form","description":"Submits form data for a task","operationId":"submitTaskForm","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskFormRequest"}}},"required":true},"responses":{"400":{"description":"Invalid form data"},"500":{"description":"Internal server error"},"200":{"description":"Submitted successfully"},"404":{"description":"Task not found"}}}},"/api/task/{id}/reassign":{"post":{"tags":["Task API"],"summary":"Reassign task","description":"Reassigns a task to a new user","operationId":"reassignTask","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskReassignRequest"}}},"required":true},"responses":{"200":{"description":"Reassigned successfully"},"500":{"description":"Internal server error"},"400":{"description":"Invalid assignee"},"404":{"description":"Task not found"}}}},"/api/process/start":{"post":{"tags":["Process API"],"summary":"Start a process","description":"Starts a process instance","operationId":"startProcess","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessRequest"}}},"required":true},"responses":{"404":{"description":"Process not found"},"500":{"description":"Internal server error"},"200":{"description":"Started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Process"}}}},"400":{"description":"Invalid request"}}}},"/api/process/deploy":{"post":{"tags":["Process API"],"summary":"Deploy a process","description":"Deploys a new process with BPMN file","operationId":"deployProcess","parameters":[{"name":"request","in":"query","required":true,"schema":{"$ref":"#/components/schemas/ProcessRequest"}}],"responses":{"500":{"description":"Internal server error"},"200":{"description":"Deployed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Process"}}}},"400":{"description":"Invalid request"}}}},"/api/process/definitions/{id}/toggle":{"post":{"tags":["Process API"],"summary":"Toggle process status","description":"Enables or disables a process definition","operationId":"toggleProcessStatus","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Process not found"},"500":{"description":"Internal server error"},"200":{"description":"Status toggled","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Process"}}}}}}},"/api/login":{"post":{"tags":["Authentication API"],"summary":"User login","description":"Authenticates a user and returns a JWT token","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequest"}}},"required":true},"responses":{"401":{"description":"Invalid username or password"},"200":{"description":"Successfully authenticated, returns JWT token","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/addUser":{"post":{"tags":["User API"],"summary":"Add a new user","description":"Creates a new user with the provided details","operationId":"addUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"required":true},"responses":{"400":{"description":"Invalid user data"},"500":{"description":"Internal server error"},"200":{"description":"User added successfully","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/users":{"get":{"tags":["User API"],"summary":"Get all users","description":"Retrieves a list of all users","operationId":"getUsers","responses":{"500":{"description":"Internal server error"},"200":{"description":"Successfully retrieved user list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/todos":{"get":{"tags":["Todo API"],"summary":"Get all todos","description":"Retrieves a list of all todo tasks","operationId":"getAllTodos","responses":{"200":{"description":"Successfully retrieved todo list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Todo"}}}},"500":{"description":"Internal server error"}}}},"/api/todos/{id}/status":{"get":{"tags":["Todo API"],"summary":"Get todo status","description":"Retrieves the status of a specific todo task by ID","operationId":"getTodoStatus","parameters":[{"name":"id","in":"path","description":"ID of the todo task","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal server error"},"200":{"description":"Successfully retrieved todo status","content":{"application/json":{"schema":{"type":"string"}}}},"404":{"description":"Todo not found"}}}},"/api/todos/{id}/diagram":{"get":{"tags":["Todo API"],"summary":"Get process diagram","description":"Retrieves the process diagram and current task for a specific todo by ID","operationId":"getProcessDiagram","parameters":[{"name":"id","in":"path","description":"ID of the todo task","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Successfully retrieved process diagram","content":{"application/json":{"schema":{"type":"string"}}}},"500":{"description":"Internal server error"},"404":{"description":"Todo not found"}}}},"/api/task/{id}/form":{"get":{"tags":["Task API"],"summary":"Get task form","description":"Retrieves the form structure for a task","operationId":"getTaskForm","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"Internal server error"},"404":{"description":"Task not found"},"200":{"description":"Success","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/task/my-tasks":{"get":{"tags":["Task API"],"summary":"Get user's tasks","description":"Retrieves tasks assigned to the current user","operationId":"getMyTasks","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"500":{"description":"Internal server error"}}}},"/api/role/users":{"get":{"tags":["Role API"],"summary":"Get all user roles","description":"Retrieves all users and their roles","operationId":"getAllUserRoles","responses":{"500":{"description":"Internal server error"},"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRole"}}}}}}},"/api/process/{id}/diagram":{"get":{"tags":["Process API"],"summary":"Get process diagram","description":"Retrieves process diagram and current task","operationId":"getProcessDiagram_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"500":{"description":"Internal server error"},"404":{"description":"Instance not found"},"200":{"description":"Success","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/api/process/instances":{"get":{"tags":["Process API"],"summary":"Get all instances","description":"Retrieves all running process instances","operationId":"getAllInstances","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Process"}}}},"500":{"description":"Internal server error"}}}},"/api/process/definitions":{"get":{"tags":["Process API"],"summary":"Get all process definitions","description":"Retrieves all process definitions","operationId":"getAllDefinitions","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Process"}}}},"500":{"description":"Internal server error"}}}}},"components":{"schemas":{"RoleRequest":{"required":["roles"],"type":"object","properties":{"roles":{"type":"array","description":"List of role names","example":["employee","manager"],"items":{"type":"string","description":"List of role names","example":"[\"employee\",\"manager\"]"}}},"description":"Request object for updating user roles"},"UserRole":{"type":"object","properties":{"username":{"type":"string"},"roles":{"type":"string"}}},"TodoRequest":{"required":["title"],"type":"object","properties":{"title":{"type":"string","description":"Title of the todo task","example":"Complete project report"},"description":{"type":"string","description":"Description of the todo task","example":"Finish the final report for the project"},"assignee":{"type":"string","description":"Username of the assignee","example":"john_doe"}},"description":"Request object for creating a todo task"},"Todo":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"processInstanceId":{"type":"string"},"processDefinitionId":{"type":"string"},"assignee":{"type":"string"}}},"TaskJumpRequest":{"required":["targetTaskId"],"type":"object","properties":{"targetTaskId":{"type":"string","description":"ID of the target task","example":"ManagerTask"}},"description":"Request object for jumping to a specific task"},"TaskFormRequest":{"required":["formData"],"type":"object","properties":{"formData":{"type":"object","additionalProperties":{"type":"object","description":"Form data as key-value pairs","example":{"reason":"Vacation","status":"approve"}},"description":"Form data as key-value pairs","example":{"reason":"Vacation","status":"approve"}}},"description":"Request object for submitting task form data"},"TaskReassignRequest":{"required":["assignee"],"type":"object","properties":{"assignee":{"type":"string","description":"Username of the new assignee","example":"john_doe"}},"description":"Request object for reassigning a task"},"ProcessRequest":{"type":"object","properties":{"name":{"type":"string","description":"Name of the process","example":"Leave Process"},"file":{"type":"string","format":"binary"},"processDefinitionId":{"type":"string","description":"Process definition ID","example":"leave:1:123"},"variables":{"type":"object","additionalProperties":{"type":"object","description":"Variables for process instance","example":{"startDate":"2025-04-20"}},"description":"Variables for process instance","example":{"startDate":"2025-04-20"}}},"description":"Request object for process operations"},"Process":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"version":{"type":"string"},"status":{"type":"string"},"deploymentTime":{"type":"string"},"processDefinitionId":{"type":"string"},"startTime":{"type":"string"},"currentTask":{"type":"string"},"assignee":{"type":"string"}}},"AuthRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string","description":"Username of the user","example":"john_doe"},"password":{"type":"string","description":"Password of the user","example":"password123"}},"description":"Request object for user authentication"},"Role":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}}},"User":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"roles":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/Role"}}}},"Task":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"processName":{"type":"string"},"assignee":{"type":"string"},"createTime":{"type":"string"}}}}}}